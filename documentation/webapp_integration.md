# Web Application Integration

The AircraftHealthML project includes a web application with a Django Rest Framework backend and a React frontend, integrated to visualize and interact with the aircraft health monitoring data and ML model results.

## Backend (Django Rest Framework)

The backend is built using Django and Django Rest Framework (DRF) and is located primarily in the `aircraft_health/aircraft_health/monitoring/` directory.

*   **Models (`models.py`):** Defines the data structure for flights (`Flight`) and associated statistics (`Stat`). These models are used to store and retrieve data related to aircraft flights and their characteristics. The `Flight` model includes attributes such as `master_index`, `before_after`, `date_diff`, `flight_length`, `label`, `hierarchy`, and `number_flights_before`. The `Stat` model includes `flight`, `key`, and `value`.
*   **Serializers (`serializers.py`):** Provides `ModelSerializer` classes (`FlightSerializer`, `StatSerializer`) to convert Django model instances into JSON format for the API responses. `StatSerializer` serializes the 'key' and 'value' fields of a Stat instance. `FlightSerializer` serializes Flight model instances and includes nested serialization for related Stat instances.
*   **Views (`views.py`):** Contains various views to handle different requests:
    *   **Django Views:** `dashboard_view` serves the main HTML page for the dashboard. `home_view` serves the home page.
    *   **DRF API Views:**
        *   `get_experiment_list`: Returns a list of available ADAPT experiment files.
        *   `get_experiment_data`: Retrieves and processes data from a specific ADAPT experiment file.
        *   `get_unique_labels`: Returns a list of unique flight labels from the database.
        *   `filter_flights_by_label`: Filters and returns flight data based on a given label.
        *   `flights_by_label`: Fetches flight data for a specific label and generates visualizations (time-series plot and histogram of flight lengths) as base64 encoded images.
        *   `flight_data_by_label`: Returns serialized flight data for a given label.
        *   `flight_insights`: Calculates and returns basic statistics (average, max, min flight length) for flights with a specific label.
        *   `grouped_flight_data`: Returns flight data grouped by label for visualization purposes.
        *   `unique_labels`: Returns unique labels along with their counts.
        *   `preprocessed_flight_data`: Returns preprocessed flight data and insights for a given label.
        *   `get_anomaly_results`: Retrieves anomaly detection results from JSON files generated by the ML models and formats them for the frontend.
        *   `update_threshold`: (POST) Endpoint to update the anomaly detection threshold (implementation details for applying the threshold are not fully present in the provided code).
        *   `get_historical_data`: (GET) Endpoint to retrieve historical anomaly data based on a date range (placeholder implementation).
        *   `FlightListView`: A generic DRF ListAPIView for listing flights with filtering, searching, and ordering capabilities.
        *   `FlightDetailView`: A DRF APIView for retrieving details of a specific flight by its master index.
    *   **Utility Functions:** `handle_nan_values` is a helper function to recursively replace NaN values with None in data structures.
*   **URLs (`urls.py`):** Maps URL paths to the corresponding views. Includes paths for the dashboard, API endpoints, and potentially other views.
*   **Management Commands (`management/commands/load_flight_data.py`):** Contains a custom command to load initial flight data into the database.

## Frontend (React)

The frontend is a React application located in `aircraft_health/aircraft_health/monitoring/frontend/src/`.

*   **`App.jsx`:** The main component of the React application. It likely handles routing and the overall layout of the application. Based on the backend API endpoints, the frontend is expected to:
    *   Fetch lists of experiments and unique flight labels.
    *   Retrieve and display experiment data and flight data.
    *   Visualize flight characteristics (e.g., flight length over time, distributions).
    *   Fetch and display anomaly detection results for both ADAPT and NGAFID data.
    *   Potentially provide an interface for updating anomaly detection thresholds and viewing historical data.
*   **Integration:** The React frontend interacts with the Django Rest Framework backend by making API calls to the endpoints defined in `monitoring/views.py` and `monitoring/urls.py`. The backend provides the necessary data and visualizations (in some cases, as base64 encoded images) for the frontend to render.

The integration allows users to interact with the aircraft health monitoring system through a web interface, viewing data, insights, and anomaly detection results.